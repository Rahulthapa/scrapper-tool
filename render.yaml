services:
  - type: web
    name: ai-web-scraper
    env: python
    plan: free
    buildCommand: |
      # Install Node.js for frontend build
      curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
      apt-get install -y nodejs
      # Build frontend
      npm install
      npm run build
      # Install Python dependencies
      pip install -r requirements.txt
      # Install Playwright browser (optional, for JS rendering)
      playwright install chromium --with-deps || true
    startCommand: uvicorn app.main:app --host 0.0.0.0 --port $PORT
    healthCheckPath: /health
    envVars:
      # Required: Supabase Database
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_ANON_KEY
        sync: false
      # Optional: FREE APIs for better data extraction
      # Google Gemini - FREE tier (recommended, no credit card required)
      # Get free key at: https://makersuite.google.com/app/apikey
      - key: GEMINI_API_KEY
        sync: false
      # Yelp API - FREE tier (5000 calls/day, no credit card required)
      # Get free key at: https://www.yelp.com/developers/v3/manage_app
      - key: YELP_API_KEY
        sync: false
